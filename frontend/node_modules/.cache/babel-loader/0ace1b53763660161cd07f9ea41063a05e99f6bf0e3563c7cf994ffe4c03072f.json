{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\luism\\\\Desktop\\\\9\\xB0A-ING-DGS\\\\EBD - Mtro. Luis Roberto Bravo Torrescano\\\\Refrescos\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Componente principal del RefrescoBot\nfunction App() {\n  _s();\n  const [currentStep, setCurrentStep] = useState('inicio'); // 'inicio', 'chat', 'recomendacion'\n  const [sesionId, setSesionId] = useState('');\n  const [preguntaActual, setPreguntaActual] = useState(null);\n  const [numeroPregunta, setNumeroPregunta] = useState(0);\n  const [refrescosReales, setRefrescosReales] = useState([]);\n  const [bebidasAlternativas, setBebidasAlternativas] = useState([]);\n  const [mensajeRefrescos, setMensajeRefrescos] = useState('');\n  const [mensajeAlternativas, setMensajeAlternativas] = useState('');\n  const [mostrarAlternativas, setMostrarAlternativas] = useState(false);\n  const [criteriosAlternativas, setCriteriosAlternativas] = useState([]);\n  const [usuarioPuedeOcultar, setUsuarioPuedeOcultar] = useState(false);\n  const [scoresSaludable, setScoreSaludable] = useState(0);\n  const [feedbackPuntuacion, setFeedbackPuntuacion] = useState(null);\n  const [mostrarFeedback, setMostrarFeedback] = useState(false);\n  const [tiempoInicioPregunta, setTiempoInicioPregunta] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [presentacionSeleccionada, setPresentacionSeleccionada] = useState({}); // {bebida_id: presentacion_index}\n  const [showNoMoreOptionsModal, setShowNoMoreOptionsModal] = useState(false);\n  const [noMoreOptionsMessage, setNoMoreOptionsMessage] = useState('');\n\n  // Función para iniciar una nueva sesión\n  const iniciarSesion = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const response = await axios.post(`${API}/iniciar-sesion`);\n      const {\n        sesion_id\n      } = response.data;\n      setSesionId(sesion_id);\n\n      // Obtener la primera pregunta\n      const preguntaResponse = await axios.get(`${API}/pregunta-inicial/${sesion_id}`);\n      setPreguntaActual(preguntaResponse.data.pregunta);\n      setNumeroPregunta(preguntaResponse.data.numero_pregunta);\n      setTiempoInicioPregunta(Date.now());\n      setCurrentStep('chat');\n    } catch (err) {\n      setError('Error al iniciar la sesión. Por favor, intenta de nuevo.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para responder una pregunta\n  const responderPregunta = async opcionSeleccionada => {\n    try {\n      setLoading(true);\n      const tiempoRespuesta = (Date.now() - tiempoInicioPregunta) / 1000; // en segundos\n\n      const respuestaData = {\n        pregunta_id: preguntaActual.id,\n        respuesta_id: opcionSeleccionada.id,\n        respuesta_texto: opcionSeleccionada.texto,\n        tiempo_respuesta: tiempoRespuesta\n      };\n      const response = await axios.post(`${API}/responder/${sesionId}`, respuestaData);\n      if (response.data.completada) {\n        // Completadas todas las preguntas, obtener recomendaciones\n        await obtenerRecomendaciones();\n      } else {\n        // Obtener siguiente pregunta\n        const siguientePreguntaResponse = await axios.get(`${API}/siguiente-pregunta/${sesionId}`);\n        if (siguientePreguntaResponse.data.finalizada) {\n          // No hay más preguntas, obtener recomendaciones\n          await obtenerRecomendaciones();\n        } else {\n          setPreguntaActual(siguientePreguntaResponse.data.pregunta);\n          setNumeroPregunta(siguientePreguntaResponse.data.numero_pregunta);\n          setTiempoInicioPregunta(Date.now());\n        }\n      }\n    } catch (err) {\n      setError('Error al procesar la respuesta. Por favor, intenta de nuevo.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para obtener recomendaciones\n  const obtenerRecomendaciones = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`${API}/recomendacion/${sesionId}`);\n      setRefrescosReales(response.data.refrescos_reales || []);\n      setBebidasAlternativas(response.data.bebidas_alternativas || []);\n      setMensajeRefrescos(response.data.mensaje_refrescos || '');\n      setMensajeAlternativas(response.data.mensaje_alternativas || '');\n      setMostrarAlternativas(response.data.mostrar_alternativas || false);\n      setCriteriosAlternativas(response.data.criterios_alternativas || []);\n      setUsuarioPuedeOcultar(response.data.usuario_puede_ocultar || false);\n      setScoreSaludable(response.data.score_saludable || 0);\n\n      // Inicializar presentaciones seleccionadas (primera por defecto)\n      const presentacionesIniciales = {};\n      [...(response.data.refrescos_reales || []), ...(response.data.bebidas_alternativas || [])].forEach(bebida => {\n        presentacionesIniciales[bebida.id] = 0;\n      });\n      setPresentacionSeleccionada(presentacionesIniciales);\n      setCurrentStep('recomendacion');\n    } catch (err) {\n      setError('Error al obtener recomendaciones. Por favor, intenta de nuevo.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para cambiar presentación seleccionada\n  const cambiarPresentacion = (bebidaId, index) => {\n    setPresentacionSeleccionada(prev => ({\n      ...prev,\n      [bebidaId]: index\n    }));\n  };\n\n  // Función para obtener datos de presentación actual\n  const obtenerPresentacionActual = bebida => {\n    const indiceSeleccionado = presentacionSeleccionada[bebida.id] || 0;\n    return bebida.presentaciones[indiceSeleccionado] || bebida.presentaciones[0];\n  };\n\n  // Función para puntuar una bebida\n  const puntuarBebida = async (bebidaId, puntuacion) => {\n    try {\n      const presentacionActual = obtenerPresentacionActual([...refrescosReales, ...bebidasAlternativas].find(b => b.id === bebidaId));\n      const puntuacionData = {\n        puntuacion: puntuacion,\n        comentario: \"Puntuación desde la interfaz\"\n      };\n      const response = await axios.post(`${API}/puntuar/${sesionId}/${bebidaId}`, puntuacionData);\n\n      // Mostrar feedback del aprendizaje\n      if (response.data.feedback_aprendizaje) {\n        setFeedbackPuntuacion(response.data.feedback_aprendizaje);\n        setMostrarFeedback(true);\n\n        // Ocultar feedback después de 8 segundos\n        setTimeout(() => {\n          setMostrarFeedback(false);\n        }, 8000);\n      }\n\n      // Actualizar la puntuación en la interfaz\n      const actualizarPuntuacion = lista => lista.map(bebida => bebida.id === bebidaId ? {\n        ...bebida,\n        puntuacion_usuario: puntuacion\n      } : bebida);\n      setRefrescosReales(prev => actualizarPuntuacion(prev));\n      setBebidasAlternativas(prev => actualizarPuntuacion(prev));\n    } catch (err) {\n      setError('Error al guardar la puntuación.');\n      console.error('Error:', err);\n    }\n  };\n\n  // Función para obtener recomendaciones alternativas\n  const obtenerAlternativas = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`${API}/recomendaciones-alternativas/${sesionId}`);\n      if (response.data.sin_mas_opciones) {\n        // No hay más opciones disponibles - mostrar modal amigable\n        const mensaje = response.data.mensaje || 'No hay más opciones disponibles en tu categoría';\n        setNoMoreOptionsMessage(mensaje);\n        setShowNoMoreOptionsModal(true);\n      } else {\n        // Hay nuevas recomendaciones disponibles\n        const nuevasRecomendaciones = response.data.recomendaciones_adicionales || [];\n        const tipoRecomendaciones = response.data.tipo_recomendaciones || 'refrescos_tradicionales';\n\n        // Inicializar presentaciones para las nuevas bebidas\n        const nuevasPresentaciones = {};\n        nuevasRecomendaciones.forEach(bebida => {\n          nuevasPresentaciones[bebida.id] = 0;\n        });\n        setPresentacionSeleccionada(prev => ({\n          ...prev,\n          ...nuevasPresentaciones\n        }));\n\n        // Determinar a qué lista agregar las nuevas bebidas basándose en el tipo\n        if (tipoRecomendaciones.includes('alternativas') || tipoRecomendaciones.includes('saludables')) {\n          // Son alternativas saludables, agregar a bebidasAlternativas\n          setBebidasAlternativas(prev => [...prev, ...nuevasRecomendaciones]);\n          setMensajeAlternativas(response.data.mensaje || 'Nuevas alternativas disponibles:');\n        } else {\n          // Son refrescos regulares, agregar a refrescosReales\n          setRefrescosReales(prev => [...prev, ...nuevasRecomendaciones]);\n          setMensajeRefrescos(response.data.mensaje || 'Más refrescos disponibles:');\n        }\n      }\n    } catch (err) {\n      // En caso de error también mostrar modal amigable\n      setNoMoreOptionsMessage('No pudimos cargar más opciones en este momento. ¡Prueba a empezar un nuevo juego!');\n      setShowNoMoreOptionsModal(true);\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para reiniciar el chat\n  const reiniciarChat = () => {\n    setCurrentStep('inicio');\n    setSesionId('');\n    setPreguntaActual(null);\n    setNumeroPregunta(0);\n    setRefrescosReales([]);\n    setBebidasAlternativas([]);\n    setMensajeRefrescos('');\n    setMensajeAlternativas('');\n    setMostrarAlternativas(false);\n    setCriteriosAlternativas([]);\n    setUsuarioPuedeOcultar(false);\n    setScoreSaludable(0);\n    setFeedbackPuntuacion(null);\n    setMostrarFeedback(false);\n    setPresentacionSeleccionada({});\n    setError('');\n  };\n\n  // Función para obtener color de probabilidad\n  const obtenerColorProbabilidad = probabilidad => {\n    if (probabilidad >= 80) return '#4CAF50'; // Verde\n    if (probabilidad >= 60) return '#FF9800'; // Naranja\n    if (probabilidad >= 40) return '#FFC107'; // Amarillo\n    return '#f44336'; // Rojo\n  };\n\n  // Componente de inicio\n  const PantallaInicio = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pantalla-inicio\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hero-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bot-avatar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bot-icon\",\n          children: \"\\uD83E\\uDD16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"titulo-principal\",\n        children: \"RefrescoBot ML\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subtitulo\",\n        children: \"\\xA1Hola! Soy tu asistente personal con Inteligencia Artificial para encontrar la bebida perfecta para ti.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"descripcion\",\n        children: [\"Te har\\xE9 \", 6, \" preguntas sobre tu d\\xEDa, tus rutinas y tus preferencias. Bas\\xE1ndome en tus respuestas, calcular\\xE9 la probabilidad de que te guste cada refresco usando algoritmos de Machine Learning.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-iniciar\",\n        onClick: iniciarSesion,\n        disabled: loading,\n        children: loading ? 'Iniciando...' : '¡Comenzar Análisis!'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 266,\n    columnNumber: 5\n  }, this);\n\n  // Componente de chat\n  const PantallaChat = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pantalla-chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progreso-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progreso-fill\",\n          style: {\n            width: `${numeroPregunta / 6 * 100}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"progreso-texto\",\n        children: [\"Pregunta \", numeroPregunta, \" de \", 6]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pregunta-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bot-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bot-avatar-small\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-bubble\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"pregunta-texto\",\n              children: preguntaActual === null || preguntaActual === void 0 ? void 0 : preguntaActual.pregunta\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"opciones-container\",\n          children: preguntaActual === null || preguntaActual === void 0 ? void 0 : preguntaActual.opciones.map((opcion, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"opcion-btn\",\n            onClick: () => responderPregunta(opcion),\n            disabled: loading,\n            children: opcion.texto\n          }, opcion.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Analizando con Inteligencia Artificial...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 292,\n    columnNumber: 5\n  }, this);\n\n  // Componente para mostrar una bebida\n  const BebidaCard = ({\n    bebida,\n    esRefresco\n  }) => {\n    var _bebida$probabilidad;\n    const presentacionActual = obtenerPresentacionActual(bebida);\n\n    // Verificar que la probabilidad exista para evitar el error\n    const probabilidad = (_bebida$probabilidad = bebida.probabilidad) !== null && _bebida$probabilidad !== void 0 ? _bebida$probabilidad : 50.0; // Valor por defecto si no existe\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bebida-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"probabilidad-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"probabilidad-badge\",\n          style: {\n            backgroundColor: obtenerColorProbabilidad(probabilidad)\n          },\n          children: [probabilidad.toFixed(1), \"% de compatibilidad\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bebida-image\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `${BACKEND_URL}${presentacionActual.imagen_local}`,\n          alt: `${bebida.nombre} ${presentacionActual.ml}ml`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bebida-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"bebida-nombre\",\n          children: bebida.nombre\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bebida-sabor\",\n          children: [\"Sabor: \", presentacionActual.sabor || 'Original']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bebida-descripcion\",\n          children: presentacionActual.descripcion_presentacion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"presentaciones-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"presentaciones-label\",\n            children: \"Elige tu presentaci\\xF3n:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"presentaciones-grid\",\n            children: bebida.presentaciones.map((presentacion, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `presentacion-btn ${presentacionSeleccionada[bebida.id] === index ? 'activa' : ''}`,\n              onClick: () => cambiarPresentacion(bebida.id, index),\n              children: [presentacion.ml, \"ml\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"presentacion-precio\",\n                children: [\"$\", presentacion.precio]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bebida-detalles\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"precio\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"precio-label\",\n              children: \"Precio:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"precio-valor\",\n              children: [\"$\", presentacionActual.precio]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tipo-bebida\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: `tipo-tag ${bebida.tipo}`,\n              children: bebida.tipo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), bebida.es_carbonatada && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"caracteristica-tag\",\n              children: \"Carbonatada\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 41\n            }, this), bebida.es_azucarada && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"caracteristica-tag\",\n              children: \"Azucarada\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"factores-clave\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\xBFPor qu\\xE9 te lo recomiendo?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: (bebida.factores_explicativos || [\"Recomendación general\"]).map((factor, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: factor\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"puntuacion-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"puntuacion-label\",\n            children: \"\\xBFQu\\xE9 te parece esta recomendaci\\xF3n?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"estrellas-container\",\n            children: [1, 2, 3, 4, 5].map(estrella => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `estrella-btn ${bebida.puntuacion_usuario && bebida.puntuacion_usuario >= estrella ? 'activa' : ''}`,\n              onClick: () => puntuarBebida(bebida.id, estrella),\n              children: \"\\u2B50\"\n            }, estrella, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), bebida.puntuacion_usuario && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"puntuacion-confirmacion\",\n            children: [\"\\xA1Gracias por tu puntuaci\\xF3n de \", bebida.puntuacion_usuario, \" estrellas!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Componente de feedback de puntuación\n  const FeedbackPuntuacion = () => {\n    if (!mostrarFeedback || !feedbackPuntuacion) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feedback-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feedback-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83E\\uDDE0 Sistema Aprendiendo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"feedback-close\",\n            onClick: () => setMostrarFeedback(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feedback-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feedback-main\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"feedback-mensaje\",\n              children: feedbackPuntuacion.mensaje_principal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"feedback-detalles\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"feedback-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-label\",\n                  children: \"Tu puntuaci\\xF3n:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-valor\",\n                  children: [feedbackPuntuacion.tu_puntuacion, \" \\u2B50\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"feedback-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-label\",\n                  children: \"Impacto futuro:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-valor\",\n                  children: feedbackPuntuacion.impacto_futuro\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"feedback-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-label\",\n                  children: \"Bebidas similares afectadas:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-valor\",\n                  children: feedbackPuntuacion.bebidas_similares_afectadas\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"feedback-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-label\",\n                  children: \"Nueva puntuaci\\xF3n promedio:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"feedback-valor\",\n                  children: [feedbackPuntuacion.nueva_puntuacion_promedio, \" \\u2B50 (\", feedbackPuntuacion.total_opiniones, \" opiniones)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"feedback-explicacion\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDD2C \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"C\\xF3mo aprendo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 23\n                }, this), \" Uso tu puntuaci\\xF3n para ajustar las probabilidades de \", feedbackPuntuacion.nombre_bebida, \" y bebidas similares (\", feedbackPuntuacion.tipo_bebida, \"s) en futuras recomendaciones.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Componente para mostrar criterios de alternativas\n  const CriteriosAlternativas = () => {\n    if (!mostrarAlternativas || criteriosAlternativas.length === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"criterios-alternativas\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83E\\uDD14 \\xBFPor qu\\xE9 veo opciones saludables?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: criteriosAlternativas.map((criterio, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: criterio\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }, this), usuarioPuedeOcultar && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-ocultar-alternativas\",\n        onClick: () => setMostrarAlternativas(false),\n        children: \"Ocultar opciones saludables\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 7\n    }, this);\n  };\n  const PantallaRecomendaciones = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pantalla-recomendaciones\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recomendaciones-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFAF \\xA1An\\xE1lisis ML Completado!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subtitle\",\n        children: \"He calculado las probabilidades espec\\xEDficas para cada bebida bas\\xE1ndome en tu perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this), scoresSaludable > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"score-saludable\",\n        children: [\"Score de preferencias saludables: \", scoresSaludable.toFixed(1)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this), refrescosReales.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seccion-refrescos\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seccion-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83E\\uDD64 Refrescos Recomendados Para Ti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mensaje-seccion\",\n          children: mensajeRefrescos\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bebidas-grid\",\n        children: refrescosReales.map(bebida => /*#__PURE__*/_jsxDEV(BebidaCard, {\n          bebida: bebida,\n          esRefresco: true\n        }, bebida.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CriteriosAlternativas, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 7\n    }, this), mostrarAlternativas && bebidasAlternativas.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seccion-alternativas\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seccion-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83C\\uDF3F Opciones Saludables\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mensaje-seccion\",\n          children: mensajeAlternativas\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bebidas-grid\",\n        children: bebidasAlternativas.map(bebida => /*#__PURE__*/_jsxDEV(BebidaCard, {\n          bebida: bebida,\n          esRefresco: false\n        }, bebida.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"acciones-finales\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-alternativas\",\n        onClick: obtenerAlternativas,\n        disabled: loading,\n        children: loading ? 'Cargando...' : 'Mostrar más opciones'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-reiniciar\",\n        onClick: reiniciarChat,\n        children: \"Nuevo an\\xE1lisis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this), usuarioPuedeOcultar && !mostrarAlternativas && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-mostrar-alternativas\",\n        onClick: () => setMostrarAlternativas(true),\n        children: \"Ver opciones saludables\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FeedbackPuntuacion, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 513,\n    columnNumber: 5\n  }, this);\n\n  // Función para reiniciar el juego\n  const reiniciarJuego = () => {\n    setShowNoMoreOptionsModal(false);\n    setCurrentStep('inicio');\n    setSesionId('');\n    setPreguntaActual(null);\n    setNumeroPregunta(0);\n    setRefrescosReales([]);\n    setBebidasAlternativas([]);\n    setMensajeRefrescos('');\n    setMensajeAlternativas('');\n    setMostrarAlternativas(false);\n    setCriteriosAlternativas([]);\n    setUsuarioPuedeOcultar(false);\n    setScoreSaludable(0);\n    setFeedbackPuntuacion(null);\n    setMostrarFeedback(false);\n    setTiempoInicioPregunta(null);\n    setLoading(false);\n    setError('');\n    setPresentacionSeleccionada({});\n    setNoMoreOptionsMessage('');\n  };\n\n  // Componente Modal para \"Sin más opciones\"\n  const ModalSinMasOpciones = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    onClick: () => setShowNoMoreOptionsModal(false),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-close\",\n        onClick: () => setShowNoMoreOptionsModal(false),\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-icon\",\n        children: \"\\uD83C\\uDF79\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"modal-title\",\n        children: \"\\xA1Has explorado todas las opciones!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"modal-message\",\n        children: [noMoreOptionsMessage, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 16\n        }, this), \"\\xBFQu\\xE9 te gustar\\xEDa hacer ahora?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-btn modal-btn-primary\",\n          onClick: reiniciarJuego,\n          children: \"\\uD83C\\uDFAE Jugar de nuevo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-btn modal-btn-secondary\",\n          onClick: () => setShowNoMoreOptionsModal(false),\n          children: \"\\uD83D\\uDCCB Ver recomendaciones actuales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 601,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(''),\n        children: \"Cerrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 9\n    }, this), showNoMoreOptionsModal && /*#__PURE__*/_jsxDEV(ModalSinMasOpciones, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 34\n    }, this), currentStep === 'inicio' && /*#__PURE__*/_jsxDEV(PantallaInicio, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 36\n    }, this), currentStep === 'chat' && /*#__PURE__*/_jsxDEV(PantallaChat, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 34\n    }, this), currentStep === 'recomendacion' && /*#__PURE__*/_jsxDEV(PantallaRecomendaciones, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 43\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 635,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"WaL0cKNb6UfeikoXxzWOcPtHPFc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","App","_s","currentStep","setCurrentStep","sesionId","setSesionId","preguntaActual","setPreguntaActual","numeroPregunta","setNumeroPregunta","refrescosReales","setRefrescosReales","bebidasAlternativas","setBebidasAlternativas","mensajeRefrescos","setMensajeRefrescos","mensajeAlternativas","setMensajeAlternativas","mostrarAlternativas","setMostrarAlternativas","criteriosAlternativas","setCriteriosAlternativas","usuarioPuedeOcultar","setUsuarioPuedeOcultar","scoresSaludable","setScoreSaludable","feedbackPuntuacion","setFeedbackPuntuacion","mostrarFeedback","setMostrarFeedback","tiempoInicioPregunta","setTiempoInicioPregunta","loading","setLoading","error","setError","presentacionSeleccionada","setPresentacionSeleccionada","showNoMoreOptionsModal","setShowNoMoreOptionsModal","noMoreOptionsMessage","setNoMoreOptionsMessage","iniciarSesion","response","post","sesion_id","data","preguntaResponse","get","pregunta","numero_pregunta","Date","now","err","console","responderPregunta","opcionSeleccionada","tiempoRespuesta","respuestaData","pregunta_id","id","respuesta_id","respuesta_texto","texto","tiempo_respuesta","completada","obtenerRecomendaciones","siguientePreguntaResponse","finalizada","refrescos_reales","bebidas_alternativas","mensaje_refrescos","mensaje_alternativas","mostrar_alternativas","criterios_alternativas","usuario_puede_ocultar","score_saludable","presentacionesIniciales","forEach","bebida","cambiarPresentacion","bebidaId","index","prev","obtenerPresentacionActual","indiceSeleccionado","presentaciones","puntuarBebida","puntuacion","presentacionActual","find","b","puntuacionData","comentario","feedback_aprendizaje","setTimeout","actualizarPuntuacion","lista","map","puntuacion_usuario","obtenerAlternativas","sin_mas_opciones","mensaje","nuevasRecomendaciones","recomendaciones_adicionales","tipoRecomendaciones","tipo_recomendaciones","nuevasPresentaciones","includes","reiniciarChat","obtenerColorProbabilidad","probabilidad","PantallaInicio","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","PantallaChat","style","width","opciones","opcion","BebidaCard","esRefresco","_bebida$probabilidad","backgroundColor","toFixed","src","imagen_local","alt","nombre","ml","sabor","descripcion_presentacion","presentacion","precio","tipo","es_carbonatada","es_azucarada","factores_explicativos","factor","estrella","FeedbackPuntuacion","mensaje_principal","tu_puntuacion","impacto_futuro","bebidas_similares_afectadas","nueva_puntuacion_promedio","total_opiniones","nombre_bebida","tipo_bebida","CriteriosAlternativas","length","criterio","PantallaRecomendaciones","reiniciarJuego","ModalSinMasOpciones","e","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/luism/Desktop/9°A-ING-DGS/EBD - Mtro. Luis Roberto Bravo Torrescano/Refrescos/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Componente principal del RefrescoBot\nfunction App() {\n  const [currentStep, setCurrentStep] = useState('inicio'); // 'inicio', 'chat', 'recomendacion'\n  const [sesionId, setSesionId] = useState('');\n  const [preguntaActual, setPreguntaActual] = useState(null);\n  const [numeroPregunta, setNumeroPregunta] = useState(0);\n  const [refrescosReales, setRefrescosReales] = useState([]);\n  const [bebidasAlternativas, setBebidasAlternativas] = useState([]);\n  const [mensajeRefrescos, setMensajeRefrescos] = useState('');\n  const [mensajeAlternativas, setMensajeAlternativas] = useState('');\n  const [mostrarAlternativas, setMostrarAlternativas] = useState(false);\n  const [criteriosAlternativas, setCriteriosAlternativas] = useState([]);\n  const [usuarioPuedeOcultar, setUsuarioPuedeOcultar] = useState(false);\n  const [scoresSaludable, setScoreSaludable] = useState(0);\n  const [feedbackPuntuacion, setFeedbackPuntuacion] = useState(null);\n  const [mostrarFeedback, setMostrarFeedback] = useState(false);\n  const [tiempoInicioPregunta, setTiempoInicioPregunta] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [presentacionSeleccionada, setPresentacionSeleccionada] = useState({}); // {bebida_id: presentacion_index}\n  const [showNoMoreOptionsModal, setShowNoMoreOptionsModal] = useState(false);\n  const [noMoreOptionsMessage, setNoMoreOptionsMessage] = useState('');\n\n  // Función para iniciar una nueva sesión\n  const iniciarSesion = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      const response = await axios.post(`${API}/iniciar-sesion`);\n      const { sesion_id } = response.data;\n      \n      setSesionId(sesion_id);\n      \n      // Obtener la primera pregunta\n      const preguntaResponse = await axios.get(`${API}/pregunta-inicial/${sesion_id}`);\n      setPreguntaActual(preguntaResponse.data.pregunta);\n      setNumeroPregunta(preguntaResponse.data.numero_pregunta);\n      setTiempoInicioPregunta(Date.now());\n      setCurrentStep('chat');\n      \n    } catch (err) {\n      setError('Error al iniciar la sesión. Por favor, intenta de nuevo.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para responder una pregunta\n  const responderPregunta = async (opcionSeleccionada) => {\n    try {\n      setLoading(true);\n      \n      const tiempoRespuesta = (Date.now() - tiempoInicioPregunta) / 1000; // en segundos\n      \n      const respuestaData = {\n        pregunta_id: preguntaActual.id,\n        respuesta_id: opcionSeleccionada.id,\n        respuesta_texto: opcionSeleccionada.texto,\n        tiempo_respuesta: tiempoRespuesta\n      };\n      \n      const response = await axios.post(`${API}/responder/${sesionId}`, respuestaData);\n      \n      if (response.data.completada) {\n        // Completadas todas las preguntas, obtener recomendaciones\n        await obtenerRecomendaciones();\n      } else {\n        // Obtener siguiente pregunta\n        const siguientePreguntaResponse = await axios.get(`${API}/siguiente-pregunta/${sesionId}`);\n        \n        if (siguientePreguntaResponse.data.finalizada) {\n          // No hay más preguntas, obtener recomendaciones\n          await obtenerRecomendaciones();\n        } else {\n          setPreguntaActual(siguientePreguntaResponse.data.pregunta);\n          setNumeroPregunta(siguientePreguntaResponse.data.numero_pregunta);\n          setTiempoInicioPregunta(Date.now());\n        }\n      }\n      \n    } catch (err) {\n      setError('Error al procesar la respuesta. Por favor, intenta de nuevo.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para obtener recomendaciones\n  const obtenerRecomendaciones = async () => {\n    try {\n      setLoading(true);\n      \n      const response = await axios.get(`${API}/recomendacion/${sesionId}`);\n      setRefrescosReales(response.data.refrescos_reales || []);\n      setBebidasAlternativas(response.data.bebidas_alternativas || []);\n      setMensajeRefrescos(response.data.mensaje_refrescos || '');\n      setMensajeAlternativas(response.data.mensaje_alternativas || '');\n      setMostrarAlternativas(response.data.mostrar_alternativas || false);\n      setCriteriosAlternativas(response.data.criterios_alternativas || []);\n      setUsuarioPuedeOcultar(response.data.usuario_puede_ocultar || false);\n      setScoreSaludable(response.data.score_saludable || 0);\n      \n      // Inicializar presentaciones seleccionadas (primera por defecto)\n      const presentacionesIniciales = {};\n      [...(response.data.refrescos_reales || []), ...(response.data.bebidas_alternativas || [])].forEach(bebida => {\n        presentacionesIniciales[bebida.id] = 0;\n      });\n      setPresentacionSeleccionada(presentacionesIniciales);\n      \n      setCurrentStep('recomendacion');\n      \n    } catch (err) {\n      setError('Error al obtener recomendaciones. Por favor, intenta de nuevo.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para cambiar presentación seleccionada\n  const cambiarPresentacion = (bebidaId, index) => {\n    setPresentacionSeleccionada(prev => ({\n      ...prev,\n      [bebidaId]: index\n    }));\n  };\n\n  // Función para obtener datos de presentación actual\n  const obtenerPresentacionActual = (bebida) => {\n    const indiceSeleccionado = presentacionSeleccionada[bebida.id] || 0;\n    return bebida.presentaciones[indiceSeleccionado] || bebida.presentaciones[0];\n  };\n\n  // Función para puntuar una bebida\n  const puntuarBebida = async (bebidaId, puntuacion) => {\n    try {\n      const presentacionActual = obtenerPresentacionActual(\n        [...refrescosReales, ...bebidasAlternativas].find(b => b.id === bebidaId)\n      );\n      \n      const puntuacionData = {\n        puntuacion: puntuacion,\n        comentario: \"Puntuación desde la interfaz\"\n      };\n      \n      const response = await axios.post(`${API}/puntuar/${sesionId}/${bebidaId}`, puntuacionData);\n      \n      // Mostrar feedback del aprendizaje\n      if (response.data.feedback_aprendizaje) {\n        setFeedbackPuntuacion(response.data.feedback_aprendizaje);\n        setMostrarFeedback(true);\n        \n        // Ocultar feedback después de 8 segundos\n        setTimeout(() => {\n          setMostrarFeedback(false);\n        }, 8000);\n      }\n      \n      // Actualizar la puntuación en la interfaz\n      const actualizarPuntuacion = (lista) => \n        lista.map(bebida => \n          bebida.id === bebidaId \n            ? { ...bebida, puntuacion_usuario: puntuacion }\n            : bebida\n        );\n      \n      setRefrescosReales(prev => actualizarPuntuacion(prev));\n      setBebidasAlternativas(prev => actualizarPuntuacion(prev));\n      \n    } catch (err) {\n      setError('Error al guardar la puntuación.');\n      console.error('Error:', err);\n    }\n  };\n\n  // Función para obtener recomendaciones alternativas\n  const obtenerAlternativas = async () => {\n    try {\n      setLoading(true);\n      \n      const response = await axios.get(`${API}/recomendaciones-alternativas/${sesionId}`);\n      \n      if (response.data.sin_mas_opciones) {\n        // No hay más opciones disponibles - mostrar modal amigable\n        const mensaje = response.data.mensaje || 'No hay más opciones disponibles en tu categoría';\n        setNoMoreOptionsMessage(mensaje);\n        setShowNoMoreOptionsModal(true);\n      } else {\n        // Hay nuevas recomendaciones disponibles\n        const nuevasRecomendaciones = response.data.recomendaciones_adicionales || [];\n        const tipoRecomendaciones = response.data.tipo_recomendaciones || 'refrescos_tradicionales';\n        \n        // Inicializar presentaciones para las nuevas bebidas\n        const nuevasPresentaciones = {};\n        nuevasRecomendaciones.forEach(bebida => {\n          nuevasPresentaciones[bebida.id] = 0;\n        });\n        \n        setPresentacionSeleccionada(prev => ({\n          ...prev,\n          ...nuevasPresentaciones\n        }));\n        \n        // Determinar a qué lista agregar las nuevas bebidas basándose en el tipo\n        if (tipoRecomendaciones.includes('alternativas') || tipoRecomendaciones.includes('saludables')) {\n          // Son alternativas saludables, agregar a bebidasAlternativas\n          setBebidasAlternativas(prev => [...prev, ...nuevasRecomendaciones]);\n          setMensajeAlternativas(response.data.mensaje || 'Nuevas alternativas disponibles:');\n        } else {\n          // Son refrescos regulares, agregar a refrescosReales\n          setRefrescosReales(prev => [...prev, ...nuevasRecomendaciones]);\n          setMensajeRefrescos(response.data.mensaje || 'Más refrescos disponibles:');\n        }\n      }\n      \n    } catch (err) {\n      // En caso de error también mostrar modal amigable\n      setNoMoreOptionsMessage('No pudimos cargar más opciones en este momento. ¡Prueba a empezar un nuevo juego!');\n      setShowNoMoreOptionsModal(true);\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Función para reiniciar el chat\n  const reiniciarChat = () => {\n    setCurrentStep('inicio');\n    setSesionId('');\n    setPreguntaActual(null);\n    setNumeroPregunta(0);\n    setRefrescosReales([]);\n    setBebidasAlternativas([]);\n    setMensajeRefrescos('');\n    setMensajeAlternativas('');\n    setMostrarAlternativas(false);\n    setCriteriosAlternativas([]);\n    setUsuarioPuedeOcultar(false);\n    setScoreSaludable(0);\n    setFeedbackPuntuacion(null);\n    setMostrarFeedback(false);\n    setPresentacionSeleccionada({});\n    setError('');\n  };\n\n  // Función para obtener color de probabilidad\n  const obtenerColorProbabilidad = (probabilidad) => {\n    if (probabilidad >= 80) return '#4CAF50'; // Verde\n    if (probabilidad >= 60) return '#FF9800'; // Naranja\n    if (probabilidad >= 40) return '#FFC107'; // Amarillo\n    return '#f44336'; // Rojo\n  };\n\n  // Componente de inicio\n  const PantallaInicio = () => (\n    <div className=\"pantalla-inicio\">\n      <div className=\"hero-section\">\n        <div className=\"bot-avatar\">\n          <div className=\"bot-icon\">🤖</div>\n        </div>\n        <h1 className=\"titulo-principal\">RefrescoBot ML</h1>\n        <p className=\"subtitulo\">\n          ¡Hola! Soy tu asistente personal con Inteligencia Artificial para encontrar la bebida perfecta para ti.\n        </p>\n        <p className=\"descripcion\">\n          Te haré {6} preguntas sobre tu día, tus rutinas y tus preferencias. \n          Basándome en tus respuestas, calcularé la probabilidad de que te guste cada refresco usando algoritmos de Machine Learning.\n        </p>\n        <button \n          className=\"btn-iniciar\" \n          onClick={iniciarSesion}\n          disabled={loading}\n        >\n          {loading ? 'Iniciando...' : '¡Comenzar Análisis!'}\n        </button>\n      </div>\n    </div>\n  );\n\n  // Componente de chat\n  const PantallaChat = () => (\n    <div className=\"pantalla-chat\">\n      <div className=\"chat-header\">\n        <div className=\"progreso-bar\">\n          <div \n            className=\"progreso-fill\" \n            style={{ width: `${(numeroPregunta / 6) * 100}%` }}\n          ></div>\n        </div>\n        <p className=\"progreso-texto\">Pregunta {numeroPregunta} de {6}</p>\n      </div>\n      \n      <div className=\"chat-content\">\n        <div className=\"pregunta-container\">\n          <div className=\"bot-message\">\n            <div className=\"bot-avatar-small\">🤖</div>\n            <div className=\"message-bubble\">\n              <p className=\"pregunta-texto\">{preguntaActual?.pregunta}</p>\n            </div>\n          </div>\n          \n          <div className=\"opciones-container\">\n            {preguntaActual?.opciones.map((opcion, index) => (\n              <button\n                key={opcion.id}\n                className=\"opcion-btn\"\n                onClick={() => responderPregunta(opcion)}\n                disabled={loading}\n              >\n                {opcion.texto}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n      \n      {loading && (\n        <div className=\"loading-indicator\">\n          <div className=\"spinner\"></div>\n          <p>Analizando con Inteligencia Artificial...</p>\n        </div>\n      )}\n    </div>\n  );\n\n  // Componente para mostrar una bebida\n  const BebidaCard = ({ bebida, esRefresco }) => {\n    const presentacionActual = obtenerPresentacionActual(bebida);\n    \n    // Verificar que la probabilidad exista para evitar el error\n    const probabilidad = bebida.probabilidad ?? 50.0; // Valor por defecto si no existe\n    \n    return (\n      <div className=\"bebida-card\">\n        <div className=\"probabilidad-header\">\n          <div \n            className=\"probabilidad-badge\"\n            style={{ backgroundColor: obtenerColorProbabilidad(probabilidad) }}\n          >\n            {probabilidad.toFixed(1)}% de compatibilidad\n          </div>\n        </div>\n        \n        <div className=\"bebida-image\">\n          <img \n            src={`${BACKEND_URL}${presentacionActual.imagen_local}`}\n            alt={`${bebida.nombre} ${presentacionActual.ml}ml`}\n          />\n        </div>\n        \n        <div className=\"bebida-info\">\n          <h3 className=\"bebida-nombre\">{bebida.nombre}</h3>\n          <p className=\"bebida-sabor\">Sabor: {presentacionActual.sabor || 'Original'}</p>\n          <p className=\"bebida-descripcion\">{presentacionActual.descripcion_presentacion}</p>\n          \n          <div className=\"presentaciones-selector\">\n            <label className=\"presentaciones-label\">Elige tu presentación:</label>\n            <div className=\"presentaciones-grid\">\n              {bebida.presentaciones.map((presentacion, index) => (\n                <button\n                  key={index}\n                  className={`presentacion-btn ${\n                    presentacionSeleccionada[bebida.id] === index ? 'activa' : ''\n                  }`}\n                  onClick={() => cambiarPresentacion(bebida.id, index)}\n                >\n                  {presentacion.ml}ml\n                  <span className=\"presentacion-precio\">${presentacion.precio}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"bebida-detalles\">\n            <div className=\"precio\">\n              <span className=\"precio-label\">Precio:</span>\n              <span className=\"precio-valor\">${presentacionActual.precio}</span>\n            </div>\n            \n            <div className=\"tipo-bebida\">\n              <span className={`tipo-tag ${bebida.tipo}`}>\n                {bebida.tipo}\n              </span>\n              {bebida.es_carbonatada && <span className=\"caracteristica-tag\">Carbonatada</span>}\n              {bebida.es_azucarada && <span className=\"caracteristica-tag\">Azucarada</span>}\n            </div>\n          </div>\n          \n          <div className=\"factores-clave\">\n            <h4>¿Por qué te lo recomiendo?</h4>\n            <ul>\n              {(bebida.factores_explicativos || [\"Recomendación general\"]).map((factor, index) => (\n                <li key={index}>{factor}</li>\n              ))}\n            </ul>\n          </div>\n          \n          <div className=\"puntuacion-section\">\n            <p className=\"puntuacion-label\">¿Qué te parece esta recomendación?</p>\n            <div className=\"estrellas-container\">\n              {[1, 2, 3, 4, 5].map((estrella) => (\n                <button\n                  key={estrella}\n                  className={`estrella-btn ${\n                    bebida.puntuacion_usuario && bebida.puntuacion_usuario >= estrella \n                      ? 'activa' \n                      : ''\n                  }`}\n                  onClick={() => puntuarBebida(bebida.id, estrella)}\n                >\n                  ⭐\n                </button>\n              ))}\n            </div>\n            {bebida.puntuacion_usuario && (\n              <p className=\"puntuacion-confirmacion\">\n                ¡Gracias por tu puntuación de {bebida.puntuacion_usuario} estrellas!\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Componente de feedback de puntuación\n  const FeedbackPuntuacion = () => {\n    if (!mostrarFeedback || !feedbackPuntuacion) return null;\n    \n    return (\n      <div className=\"feedback-overlay\">\n        <div className=\"feedback-modal\">\n          <div className=\"feedback-header\">\n            <h3>🧠 Sistema Aprendiendo</h3>\n            <button \n              className=\"feedback-close\"\n              onClick={() => setMostrarFeedback(false)}\n            >\n              ×\n            </button>\n          </div>\n          \n          <div className=\"feedback-content\">\n            <div className=\"feedback-main\">\n              <p className=\"feedback-mensaje\">{feedbackPuntuacion.mensaje_principal}</p>\n              \n              <div className=\"feedback-detalles\">\n                <div className=\"feedback-item\">\n                  <span className=\"feedback-label\">Tu puntuación:</span>\n                  <span className=\"feedback-valor\">{feedbackPuntuacion.tu_puntuacion} ⭐</span>\n                </div>\n                \n                <div className=\"feedback-item\">\n                  <span className=\"feedback-label\">Impacto futuro:</span>\n                  <span className=\"feedback-valor\">{feedbackPuntuacion.impacto_futuro}</span>\n                </div>\n                \n                <div className=\"feedback-item\">\n                  <span className=\"feedback-label\">Bebidas similares afectadas:</span>\n                  <span className=\"feedback-valor\">{feedbackPuntuacion.bebidas_similares_afectadas}</span>\n                </div>\n                \n                <div className=\"feedback-item\">\n                  <span className=\"feedback-label\">Nueva puntuación promedio:</span>\n                  <span className=\"feedback-valor\">{feedbackPuntuacion.nueva_puntuacion_promedio} ⭐ ({feedbackPuntuacion.total_opiniones} opiniones)</span>\n                </div>\n              </div>\n              \n              <div className=\"feedback-explicacion\">\n                <p>🔬 <strong>Cómo aprendo:</strong> Uso tu puntuación para ajustar las probabilidades de {feedbackPuntuacion.nombre_bebida} y bebidas similares ({feedbackPuntuacion.tipo_bebida}s) en futuras recomendaciones.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Componente para mostrar criterios de alternativas\n  const CriteriosAlternativas = () => {\n    if (!mostrarAlternativas || criteriosAlternativas.length === 0) return null;\n    \n    return (\n      <div className=\"criterios-alternativas\">\n        <h4>🤔 ¿Por qué veo opciones saludables?</h4>\n        <ul>\n          {criteriosAlternativas.map((criterio, index) => (\n            <li key={index}>{criterio}</li>\n          ))}\n        </ul>\n        {usuarioPuedeOcultar && (\n          <button \n            className=\"btn-ocultar-alternativas\"\n            onClick={() => setMostrarAlternativas(false)}\n          >\n            Ocultar opciones saludables\n          </button>\n        )}\n      </div>\n    );\n  };\n  const PantallaRecomendaciones = () => (\n    <div className=\"pantalla-recomendaciones\">\n      <div className=\"recomendaciones-header\">\n        <h2>🎯 ¡Análisis ML Completado!</h2>\n        <p className=\"subtitle\">He calculado las probabilidades específicas para cada bebida basándome en tu perfil</p>\n        {scoresSaludable > 0 && (\n          <p className=\"score-saludable\">Score de preferencias saludables: {scoresSaludable.toFixed(1)}</p>\n        )}\n      </div>\n      \n      {refrescosReales.length > 0 && (\n        <div className=\"seccion-refrescos\">\n          <div className=\"seccion-header\">\n            <h3>🥤 Refrescos Recomendados Para Ti</h3>\n            <p className=\"mensaje-seccion\">{mensajeRefrescos}</p>\n          </div>\n          \n          <div className=\"bebidas-grid\">\n            {refrescosReales.map((bebida) => (\n              <BebidaCard key={bebida.id} bebida={bebida} esRefresco={true} />\n            ))}\n          </div>\n        </div>\n      )}\n      \n      <CriteriosAlternativas />\n      \n      {mostrarAlternativas && bebidasAlternativas.length > 0 && (\n        <div className=\"seccion-alternativas\">\n          <div className=\"seccion-header\">\n            <h3>🌿 Opciones Saludables</h3>\n            <p className=\"mensaje-seccion\">{mensajeAlternativas}</p>\n          </div>\n          \n          <div className=\"bebidas-grid\">\n            {bebidasAlternativas.map((bebida) => (\n              <BebidaCard key={bebida.id} bebida={bebida} esRefresco={false} />\n            ))}\n          </div>\n        </div>\n      )}\n      \n      <div className=\"acciones-finales\">\n        <button className=\"btn-alternativas\" onClick={obtenerAlternativas} disabled={loading}>\n          {loading ? 'Cargando...' : 'Mostrar más opciones'}\n        </button>\n        <button className=\"btn-reiniciar\" onClick={reiniciarChat}>\n          Nuevo análisis\n        </button>\n        {usuarioPuedeOcultar && !mostrarAlternativas && (\n          <button \n            className=\"btn-mostrar-alternativas\"\n            onClick={() => setMostrarAlternativas(true)}\n          >\n            Ver opciones saludables\n          </button>\n        )}\n      </div>\n      \n      <FeedbackPuntuacion />\n    </div>\n  );\n\n  // Función para reiniciar el juego\n  const reiniciarJuego = () => {\n    setShowNoMoreOptionsModal(false);\n    setCurrentStep('inicio');\n    setSesionId('');\n    setPreguntaActual(null);\n    setNumeroPregunta(0);\n    setRefrescosReales([]);\n    setBebidasAlternativas([]);\n    setMensajeRefrescos('');\n    setMensajeAlternativas('');\n    setMostrarAlternativas(false);\n    setCriteriosAlternativas([]);\n    setUsuarioPuedeOcultar(false);\n    setScoreSaludable(0);\n    setFeedbackPuntuacion(null);\n    setMostrarFeedback(false);\n    setTiempoInicioPregunta(null);\n    setLoading(false);\n    setError('');\n    setPresentacionSeleccionada({});\n    setNoMoreOptionsMessage('');\n  };\n\n  // Componente Modal para \"Sin más opciones\"\n  const ModalSinMasOpciones = () => (\n    <div className=\"modal-overlay\" onClick={() => setShowNoMoreOptionsModal(false)}>\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n        <button \n          className=\"modal-close\" \n          onClick={() => setShowNoMoreOptionsModal(false)}\n        >\n          ×\n        </button>\n        <div className=\"modal-icon\">🍹</div>\n        <h2 className=\"modal-title\">¡Has explorado todas las opciones!</h2>\n        <p className=\"modal-message\">\n          {noMoreOptionsMessage}\n          <br/><br/>\n          ¿Qué te gustaría hacer ahora?\n        </p>\n        <div className=\"modal-buttons\">\n          <button \n            className=\"modal-btn modal-btn-primary\"\n            onClick={reiniciarJuego}\n          >\n            🎮 Jugar de nuevo\n          </button>\n          <button \n            className=\"modal-btn modal-btn-secondary\"\n            onClick={() => setShowNoMoreOptionsModal(false)}\n          >\n            📋 Ver recomendaciones actuales\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"App\">\n      {error && (\n        <div className=\"error-message\">\n          <p>{error}</p>\n          <button onClick={() => setError('')}>Cerrar</button>\n        </div>\n      )}\n      \n      {showNoMoreOptionsModal && <ModalSinMasOpciones />}\n      \n      {currentStep === 'inicio' && <PantallaInicio />}\n      {currentStep === 'chat' && <PantallaChat />}\n      {currentStep === 'recomendacion' && <PantallaRecomendaciones />}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}